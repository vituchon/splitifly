<!DOCTYPE html>
<html>
    <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Splitifly</title>
      <link rel="icon" type="image/x-icon" href="https://fonts.gstatic.com/s/e/notoemoji/15.1/1f4b8/512.png=s60">
      <link href="/assets/css/main.css" rel="stylesheet" >
    </head>
    <body>
      <style>
        #about-button-container  {
          position: fixed;
          z-index: 1000;
        }

        #about-button {
          background: linear-gradient(135deg, #3498db, #2980b9);
          color: white;
          font-size: 12px;
          padding: 8px;
          border: none;
          border-radius: 8px;
          cursor: pointer;
          transition: transform 0.2s, box-shadow 0.2s;
          box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }

        #about-button:hover {
          transform: scale(1.05);
          box-shadow: 0px 6px 12px rgba(0, 0, 0, 0.3);
        }

        #about-button-container {
          top: 10px;
          right: 10px;
        }
      </style>
      <div id="about-button-container">
        <button id="about-button" style="color: transparent;  text-shadow: 0 0 0 white;">‚ùî</button>
      </div>
      <dialog id="about-dialog" style="max-width: 75%;"></dialog>
      <script>
        document.addEventListener('DOMContentLoaded', () => {
          const aboutDialog = document.getElementById('about-dialog');
          const openAboutDialogButton = document.getElementById('about-button');

          openAboutDialogButton.addEventListener('click', async () => {
            try {

              const response = await fetch('/assets/html/about.html');
              if (!response.ok) {
                throw new Error('Error al cargar el contenido');
              }

              const content = await response.text();
              aboutDialog.innerHTML = content;
              aboutDialog.showModal();
              aboutDialog.scrollTop = 0;
            } catch (error) {
              console.error('Error:', error);
              alert('No se pudo cargar el contenido del di√°logo.');
            }
          });

          aboutDialog.addEventListener('close', () => {
            console.log('Di√°logo cerrado');
          });
        });
      </script>

      <div>
        <h1 style="text-align: center;">Splitifly üí∏ü§ù</h1>
      </div>
      <div id="group-list"></div>

      <button id="add-group-btn">‚ûïüë•üí∞</button>

      <div id="add-group-modal" class="modal">
        <div class="modal-content">
          <h2>Agregar Grupo</h2>
          <div style="margin-bottom: 2em;">
            <input id="group-name-input" type="text" placeholder="Nombre del grupo">
            <button id="add-group-confirm-btn" class="color-button">OK</button>
            <button class="color-button close">Cancel</button>
          </div>
        </div>
      </div>

      <div id="add-participant-modal" class="modal">
        <div class="modal-content">
          <h2>Agregar Participante</h2>
          <div style="margin-bottom: 2em;">
            <input id="participant-name-input" type="text" placeholder="Nombre del participante">
            <button id="add-participant-confirm-btn" class="color-button">OK</button>
            <button class="color-button close">Cancel</button>
          </div>
        </div>
      </div>

      <div id="add-movement-modal" class="modal">
        <div class="modal-content">
          <h2>Agregar Movimiento</h2>
          <div class="vertical-layout">
            <input id="movement-concept-input" style="width: auto;" type="text" placeholder="Concepto del movimiento">
            <input id="movement-price-input" style="width: auto;" type="number" disabled placeholder="Monto total">

            <div id="participant-movement-list" class="vertical-layout" style="margin-bottom: 1em;">
            </div>

            <div class="horizontal-layout" style="margin-bottom: 1em;">
              <select id="participant-movement-selector">
              </select>
              <span>&nbsp;</span>
              <input id="participant-movement-price-input" type="number" placeholder="Contribuci√≥n...">
              <span style="flex-grow: 2;"></span>
              <button id="add-participant-movement-confirm-btn" class="color-button">Agregar</button>
            </div>

            <div class="horizontal-layout" style="margin-bottom: 2em;">
              <div style="flex-grow: 2;"></div>
              <button id="add-movement-confirm-btn" class="color-button">OK</button>
              &nbsp;
              <button class="color-button close">Cancel</button>
            </div>
          </div>
        </div>
      </div>

      <div id="display-aggregated-balance-modal" class="modal">
        <div class="modal-content cat-background">
          <h2>Balance entre participantes</h2>
          <table id="balance-table" border="1">
            <thead>
              <tr id="balance-header-row">
                <th>Participante</th>
              </tr>
            </thead>
            <tbody id="balance-body"></tbody>
          </table>

          <h2>Balance total</h2>
          <table id="shares-table" border="1" style="margin-bottom: 2em;">
            <thead>
              <tr>
                <th>Participante</th>
                <th>Balance</th>
              </tr>
            </thead>
            <tbody id="shares-body"></tbody>
          </table>
          <h3 id="balanced-title" style="color: yellow; background-color: black;">¬°El grupo est√° balanceado!<br/><span style="font-size: 0.8em;">Las cuentas est√°n saldadas ‚öñÔ∏èüôÜüèø</span></h3>
          <button class="color-button close">Cerrar</button>
        </div>
      </div>
    </body>
    <script type="module" src="/assets/js/app/index.js"></script>
</html>


